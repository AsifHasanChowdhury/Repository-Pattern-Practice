@*@using RepositoryPatternPractice.Models.Business_Objet*@
@model IEnumerable<Product_Table>

@*@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}*@

<h1>Index</h1>

<div>
    <h4>Product_Table</h4>
    <hr />
    

    @if (Model.Count() > 0)
    {
        <table class="table table-striped border">
            <tr class="table-secondary">
                <th>
                    @Html.DisplayNameFor(categorymodel=>categorymodel.Id)
                </th>

                <th>
                    @Html.DisplayNameFor(categorymodel=>categorymodel.productName)
                </th>
                <th>
                    @Html.DisplayNameFor(categorymodel=>categorymodel.productCount)
                </th>
                <th>
                    @Html.DisplayNameFor(categorymodel=>categorymodel.productPrice)
                </th>
                <th>
                    @Html.DisplayNameFor(categorymodel=>categorymodel.productCompany)
                </th>
                <th>
                    @Html.DisplayNameFor(categorymodel=>categorymodel.PriceHistory)
                </th>
                <th>
                    Table Data Actions 
                </th>
                
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(categorymodel=>item.Id)
                    </td>
                    <td>
                        @Html.DisplayFor(categorymodel=>item.productName)
                    </td>
                    <td>
                        @Html.DisplayFor(categorymodel=>item.productCount)
                    </td>
                    <td>
                        @Html.DisplayFor(categorymodel=>item.productPrice)
                    </td>
                    <td>
                        @Html.DisplayFor(categorymodel=>item.productName)
                    </td>

                   <td>
                        @if (item.PriceHistory.Count > 0)
                        {

                            @foreach (var it in item.PriceHistory)
                            {
                      <td>
                           @it
                      </td>
                    
                    }
                    }
                    </td>



                    
                   
                    <td>
                        <a class="btn btn-primary text-white" asp-action="Update" asp-route-Id="@item.Id"> Edit</a>
                        <a class="btn btn-success text-white" asp-action="Details" asp-route-Id="@item.Id"> Details</a>
                        <a class="btn btn-danger text-white" asp-action="Delete" asp-route-Id="@item.Id"> Delete</a>
                        <a class="btn btn-danger text-white" asp-action="GetProductHistory" asp-route-Id="@item.Id"> History</a>

                    </td>
                </tr>
            }

        </table>
    }

    else
    {
        <p>No Category Exists....</p>
    }



    @*
        <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Id)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Id)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.productName)
        </dt>
       @* <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.productName)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.productCompany)
        </dt>
        @*<dd class = "col-sm-10">
            @Html.DisplayFor(model => model.productCompany)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.productPrice)
        </dt>
        @*<dd class = "col-sm-10">
            @Html.DisplayFor(model => model.productPrice)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.productCount)
        </dt>
        @*<dd class = "col-sm-10">
            @Html.DisplayFor(model => model.productCount)
        </dd>
    </dl>
</div>

*@



    <div>
        @*@Html.ActionLink("Click here", // <-- Link text
        "Create", // <-- Action Method Name
        "Home"// <-- Controller Name
        )*@
        @* Previous is Html.Action Approach Working*@

        <a asp-action="Create" asp-controller="Home" class="btn-btn-info" style="background-color:black;">Create New</a>

@*        <a asp-action="Create">Create</a>
*@    </div>

<div>   
  <a asp-action="Index">Back to List</a>
</div>
